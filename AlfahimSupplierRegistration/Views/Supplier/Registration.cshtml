
@{
    ViewBag.Title = "Registration";
}

<script src="/Scripts/jquery-1.12.4.min.js"></script>

<script src="/Scripts/bootstrap.min.js"></script>

<script type="text/javascript">
        $(document).ready(function () {
            $('#linclose').click(function () {
                $('#divError').hide('fade');
            });

            $('#SuccessModal').on('hidden.bs.modal', function () {
                window.location.href = "/Supplier/Login"
            });

            $('#btnRegistration').click(function () {

                if ($('#txtEmail').val() == "") {
                    $('#divErrorText').text("Enter Email Address");
                    $('#divError').show('fade');
                    return;
                }

                if ($('#txtPassword').val() == "") {
                    $('#divErrorText').text("Enter Password");
                    $('#divError').show('fade');
                    return;
                }

                $('#btnRegistration').val("Please Wait");
                $('#btnRegistration').attr('disabled', 'disabled');


                $.ajax({
                    url: "/account/Registration",
                    method: "POST",
                    data: {
                        email: $('#txtEmail').val(),
                        password: $('#txtPassword').val(),
                    },
                    success: function (data) {

                        if (data == "Success") {
                            $('#SuccessModal').modal('show');
                        }
                        else {
                            $('#divErrorText').text(data);
                            $('#divError').show('fade');
                            $('#btnRegistration').val("Register");
                            $('#btnRegistration').removeAttr('disabled', 'disabled');


                        }
                    },
                    error: function (jqXHR) {
                        $('#divErrorText').text(jqXHR.responseText);
                        $('#divError').show('fade');
                    }
                

                })


            });

        });


</script>


<h2>New Supplier Registration</h2>

<div class="form-horizontal">

    <table class="table table-bordered">
        <thead>
            <tr class="warning">
                <td colspan="2">
                    New Suppler Registration
                </td>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>Email Address</td>
                <td><input type="text" id="txtEmail" maxlength="35" style="width:100%;"  /></td>
            </tr>
            <tr>
                <td>Password</td>
                <td><input type="password" id="txtPassword" maxlength="25" style="width:100%;" /></td>
            </tr>



            <tr class="warning">
                <td colspan="2">
                    <input id="btnRegistration" class="btn btn-warning" type="button" value="Register" />
                </td>

            </tr>
        </tbody>
    </table>
    <div class="modal fade" tabindex="-1" id="SuccessModal"
         data-keyboard="false" data-backdrop="static">
        <div class="modal-dialog modal-sm">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">
                        &times;
                    </button>
                    <h4>Success</h4>
                </div>
                <div class="modal-body">
                    <h2>Registration Successful!</h2>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-warning" data-dismiss="modal">
                        Close
                    </button>

                </div>
            </div>
        </div>
    </div>
    <div id="divError" class="alert alert-danger collapse">
        <a id="linclose" class="close" href="#">&times;</a>
        <div id="divErrorText"></div>
    </div>

</div>
